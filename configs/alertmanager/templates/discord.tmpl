{{ define "discord.default.title" }}[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .CommonLabels.alertname }}{{ end }}

{{ define "discord.default.message" }}
{
  "content": "{{ if eq .Status "firing" }}ðŸ”¥ **ALERTS FIRING!** ðŸ”¥{{ else }}âœ… **ALERTS RESOLVED** âœ…{{ end }}",
  "embeds": [
    {{ range $index, $alert := .Alerts }}{{ if $index }},{{ end }}
    {
      "title": "{{ $alert.Labels.alertname }}",
      "description": "{{ $alert.Annotations.description }}",
      "color": {{ if eq $alert.Labels.severity "critical" }}16711680{{ else if eq $alert.Labels.severity "warning" }}16761600{{ else }}65280{{ end }},
      "fields": [
        {
          "name": "Severity",
          "value": "{{ $alert.Labels.severity }}",
          "inline": true
        },
        {
          "name": "Instance",
          "value": "{{ $alert.Labels.instance }}",
          "inline": true
        },
        {
          "name": "Started",
          "value": "{{ $alert.StartsAt.Format "2006-01-02 15:04:05" }}",
          "inline": false
        }
      ]
    }
    {{ end }}
  ]
}
{{ end }}